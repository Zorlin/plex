{
    "class": "CommandLineTool",
    "name": "unidock",
    "description": "",
    "baseCommand": ["/bin/bash", "-c"],
    "arguments": [
      "wget https://github.com/dptech-corp/Uni-Dock/releases/download/1.0.0/unidock;",
      "wget https://raw.githubusercontent.com/labdao/plex/diffdock_batch/tools/unidock/parse_docking_result.sh;",
      "chmod +x unidock;",
      "chmod +x parse_docking_result.sh;",
      "unzip $(inputs.small_molecule_set.filepath);",
      "find zinc22 -type f -name '*.pdbqt' | xargs realpath | sort | uniq > /outputs/index.txt;",
      "wc /outputs/index.txt;",
      "mkdir /docked;",
      "./unidock --receptor $(inputs.protein.filepath) --search_mode $(inputs.search_mode.default) --verbosity 2 --size_x 30 --size_y 30 --size_z 30 --center_x 0 --center_y 0 --center_z 0 --ligand_index /outputs/index.txt --dir /docked;",
      "./parse_docking_result.sh /docked /outputs/scores.csv;",
      "zip -r /outputs/docked.zip /docked"
      ],
    "dockerPull": "us-docker.pkg.dev/colab-images/public/runtime:latest",
    "gpuBool": true,
    "networkBool": true,
    "inputs": {
      "protein": {
        "type": "File",
        "glob": ["*.pdbqt"]
      },
      "small_molecule_set": {
        "type": "File",
        "glob": ["*.zip"]
      },
      "search_mode": {
        "type": "string",
        "default": "detail"
      },
      "size_x": {
        "type": "integer",
        "default": "30"
      },
      "size_y": {
        "type": "integer",
        "default": "30"
      },
      "size_z": {
        "type": "integer",
        "default": "30"
      },
      "center_x": {
        "type": "integer",
        "default": "0"
      },
      "center_y": {
        "type": "integer",
        "default": "0"
      },
      "center_z": {
        "type": "integer",
        "default": "0"
      }
    },
    "outputs": {
      "scores": {
        "type": "File",
        "glob": ["*.csv"]
      },
      "docked_small_molecule_set": {
        "type": "File",
        "glob": ["*.zip"]
      }
    }
}
